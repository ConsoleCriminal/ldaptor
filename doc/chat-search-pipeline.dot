digraph protocol_events {
  ranksep=0.1;

  subgraph start {
    rank=same;

    cStart [label="Client"];
    sStart [label="Server"];
  };

  subgraph cluster_client {
    style=invis;
    node [width=0, height=0, label=""];
    edge [weight=100, arrowhead=none];

    cEnd [style=invis];
    cStart -> c1 -> c2 -> c3 -> c4 -> c5 -> c6 -> c7
      -> c8 -> c9 -> c10;
    c10 -> cEnd [arrowhead=normal];
  };

  subgraph cluster_server {
    style=invis;

    node [width=0, height=0, label=""];
    edge [weight=100, arrowhead=none];

    sEnd [style=invis];
    sStart -> s1 -> s2 -> s3 -> s4 -> s5 -> s6 -> s7
      -> s8 -> s9 -> s10;
    s10 -> sEnd [arrowhead=normal];
  };

  c1 -> s2 [label="search A", color=green];
  c2 -> s3 [label="search B", color=blue];
  s4 -> c5 [label="entry A1", color=green];
  s5 -> c6 [label="entry B1", color=blue];
  s6 -> c7 [label="entry A2", color=green];
  s7 -> c8 [label="A done", color=green];
  s8 -> c9 [label="entry B2", color=blue];
  s9 -> c10 [label="B done", color=blue];
};
